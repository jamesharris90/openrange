    <div class="user-header" style="position:fixed;right:0;top:0;z-index:1000;background:var(--bg-card,#141b2d);padding:8px 24px 8px 24px;min-width:220px;text-align:right;">
        <span id="userMenuName">Guest</span>
        <a href="login.html" id="loginLink">Login</a>
        <a href="register.html" id="registerLink">Register</a>
        <a href="user.html" id="profileLink" style="display:none;">Profile</a>
        <a href="admin.html" id="adminLink" style="display:none;">Admin</a>
        <a href="#" id="logoutLink" style="display:none;">Logout</a>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        let token = localStorage.getItem('authToken');
        let userMenuName = document.getElementById('userMenuName');
        let loginLink = document.getElementById('loginLink');
        let registerLink = document.getElementById('registerLink');
        let profileLink = document.getElementById('profileLink');
        let adminLink = document.getElementById('adminLink');
        let logoutLink = document.getElementById('logoutLink');
        if (token) {
            try {
                let payload = JSON.parse(atob(token.split('.')[1]));
                userMenuName.textContent = payload.username || 'User';
                loginLink.style.display = 'none';
                registerLink.style.display = 'none';
                profileLink.style.display = '';
                logoutLink.style.display = '';
                if (payload.is_admin) adminLink.style.display = '';
            } catch(e) {}
        } else {
            profileLink.style.display = 'none';
            adminLink.style.display = 'none';
            logoutLink.style.display = 'none';
        }
        logoutLink && logoutLink.addEventListener('click', function(e) {
            e.preventDefault();
            localStorage.removeItem('authToken');
            window.location.href = 'login.html';
        });
    });
    </script>
<!DOCTYPE html>
<html>
<head><title>Test Proxy</title></head>
<body style="background: #0a0e27; color: #fff; font-family: monospace; padding: 40px;">
    <h1>Testing Proxy Stock Endpoint...</h1>
    <button onclick="testStock()" style="padding: 20px; font-size: 18px; cursor: pointer;">Test AAPL</button>
    <pre id="result" style="background: #1a2332; padding: 20px; margin-top: 20px; border-radius: 8px;"></pre>
    
    <script>
        async function testStock() {
            const result = document.getElementById('result');
            result.textContent = 'Loading...';
            
            try {
                const response = await fetch('http://localhost:8080/api/stock/AAPL');
                const data = await response.json();
                result.textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                result.textContent = 'ERROR: ' + error.message;
            }
        }
        
        // Auto-test on load
        window.addEventListener('load', testStock);
    </script>
</body>
</html>
